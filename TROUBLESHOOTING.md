# Устранение проблем с переключателем слоев карты

## Проблема: Не видно переключатель слоев карты

Если после перезапуска вы не видите переключатель слоев, выполните следующие шаги:

### 1. Проверка установленных пакетов

```bash
cd frontend
npm list react-leaflet leaflet
```

Должны быть установлены:
- `react-leaflet@4.2.1` или выше
- `leaflet@1.9.4` или выше

### 2. Очистка кэша

```bash
# Остановите dev сервер (Ctrl+C)
cd frontend
rm -rf .next
npm run dev
```

### 3. Очистка кэша браузера

- **Chrome/Edge**: `Ctrl+Shift+R` (Windows/Linux) или `Cmd+Shift+R` (Mac)
- **Firefox**: `Ctrl+F5`
- Или откройте DevTools (F12) → вкладка **Network** → включите **"Disable cache"**

### 4. Проверка консоли браузера

Откройте консоль браузера (F12 → Console) и проверьте наличие ошибок:
- Ошибки загрузки Leaflet
- Ошибки React
- Ошибки импорта модулей

### 5. Где искать переключатель слоев

Переключатель слоев должен находиться:
- **Позиция**: Правый верхний угол карты
- **Внешний вид**: Иконка со слоями (4 квадратика) или текст "Layers"
- **При клике**: Открывается список слоев:
  - Стандартная карта
  - Спутник
  - Светлая карта
  - Темная карта
  - Топографическая карта

### 6. Проверка через DevTools

1. Откройте DevTools (F12)
2. Перейдите во вкладку **Elements** (или **Инспектор**)
3. Найдите элемент с классом `.leaflet-control-layers`
4. Проверьте, что он присутствует в DOM
5. Проверьте стили: должен быть `z-index: 1000`

### 7. Альтернативный способ проверки

Добавьте временный лог в консоль:

В `frontend/components/Map.tsx` добавьте после строки 151:

```typescript
useEffect(() => {
  console.log('LayersControl должен быть виден в правом верхнем углу карты');
}, []);
```

### 8. Если ничего не помогает

Попробуйте изменить позицию контрола:

В `frontend/components/Map.tsx` измените:
```typescript
<LayersControl position="bottomright">
```

или

```typescript
<LayersControl position="topleft">
```

Это поможет понять, не перекрывается ли контрол другими элементами.

## Дополнительная информация

- Контролы масштабирования (кнопки +/-) должны быть в правом нижнем углу
- Переключатель слоев - в правом верхнем углу
- Оба контрола имеют `z-index: 1000`, поэтому должны быть видны поверх других элементов

